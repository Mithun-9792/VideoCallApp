{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/palmi/OneDrive/Desktop/videocall/src/app/Component/VideoCall.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport AgoraRTC, {\r\n  LocalUser,\r\n  RemoteUser,\r\n  useJoin,\r\n  useLocalMicrophoneTrack,\r\n  useLocalCameraTrack,\r\n  usePublish,\r\n  useRemoteUsers,\r\n} from \"agora-rtc-react\";\r\n\r\nexport default function VideoCall() {\r\n  if (typeof window === \"undefined\") {\r\n    return null; // Prevents rendering on the server\r\n  }\r\n  const [appId, setAppId] = useState(\"4e4f366a04334ff19d2205abd577b0bb\");\r\n  const [channel, setChannel] = useState(\"test\");\r\n  const [token, setToken] = useState(null);\r\n  const [isCalling, setIsCalling] = useState(false);\r\n  const [micOn, setMicOn] = useState(true);\r\n  const [cameraOn, setCameraOn] = useState(true);\r\n\r\n  useJoin({ appid: appId, channel: channel, token: token || null }, isCalling);\r\n  const [localMicrophoneTrack, setLocalMicrophoneTrack] = useState(null);\r\n  const [localCameraTrack, setLocalCameraTrack] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== \"undefined\" && (micOn || cameraOn)) {\r\n      async function initTracks() {\r\n        try {\r\n          const stream = await navigator.mediaDevices.getUserMedia({\r\n            video: true,\r\n            audio: true,\r\n          });\r\n\r\n          const micTrack = await AgoraRTC.createMicrophoneAudioTrack();\r\n          const camTrack = await AgoraRTC.createCameraVideoTrack();\r\n\r\n          setLocalMicrophoneTrack(micTrack);\r\n          setLocalCameraTrack(camTrack);\r\n        } catch (error) {\r\n          console.error(\"Error accessing camera/microphone:\", error);\r\n        }\r\n      }\r\n      initTracks();\r\n    }\r\n\r\n    // if (micOn || cameraOn) {\r\n    // }\r\n  }, [micOn, cameraOn]);\r\n\r\n  usePublish([localMicrophoneTrack, localCameraTrack]);\r\n  const remoteUsers = useRemoteUsers();\r\n  if (remoteUsers.length > 0) {\r\n    console.log(remoteUsers, \"remoteUsers\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-screen bg-gray-900 text-white p-6\">\r\n      {isCalling ? (\r\n        <div className=\"w-full max-w-4xl flex flex-col items-center gap-4\">\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"w-64 h-64 bg-gray-700 flex items-center justify-center rounded-lg\">\r\n              <LocalUser\r\n                // audioTrack={localMicrophoneTrack}\r\n                videoTrack={localCameraTrack}\r\n                cameraOn={cameraOn}\r\n                micOn={micOn}\r\n              >\r\n                <span className=\"text-center\">You</span>\r\n              </LocalUser>\r\n            </div>\r\n            {remoteUsers.length > 0 ? (\r\n              remoteUsers.map((user) => (\r\n                <div\r\n                  key={user.uid}\r\n                  className=\"w-64 h-64 bg-gray-700 flex items-center justify-center rounded-lg\"\r\n                >\r\n                  <RemoteUser user={user} />\r\n                  <span className=\"text-center\">{user.uid}</span>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div className=\"w-64 h-64 bg-gray-700 flex items-center justify-center rounded-lg\">\r\n                Waiting for user...\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex gap-4 mt-6\">\r\n            <button\r\n              onClick={() => setMicOn(!micOn)}\r\n              className={`px-6 py-2 rounded-lg ${\r\n                micOn ? \"bg-green-500\" : \"bg-red-500\"\r\n              }`}\r\n            >\r\n              {micOn ? \"Mute Mic\" : \"Unmute Mic\"}\r\n            </button>\r\n            <button\r\n              onClick={() => setCameraOn(!cameraOn)}\r\n              className={`px-6 py-2 rounded-lg ${\r\n                cameraOn ? \"bg-green-500\" : \"bg-red-500\"\r\n              }`}\r\n            >\r\n              {cameraOn ? \"Turn Off Camera\" : \"Turn On Camera\"}\r\n            </button>\r\n            <button\r\n              onClick={() => setIsCalling(false)}\r\n              className=\"px-6 py-2 bg-red-600 rounded-lg\"\r\n            >\r\n              Leave Call\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n          <h1 className=\"text-xl font-bold\">Join a Video Call</h1>\r\n          <input\r\n            type=\"text\"\r\n            value={appId}\r\n            onChange={(e) => setAppId(e.target.value)}\r\n            placeholder=\"Agora App ID\"\r\n            className=\"p-2 bg-gray-800 border border-gray-600 rounded-lg w-64\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            value={channel}\r\n            onChange={(e) => setChannel(e.target.value)}\r\n            placeholder=\"Channel Name\"\r\n            className=\"p-2 bg-gray-800 border border-gray-600 rounded-lg w-64\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            value={token || \"\"}\r\n            onChange={(e) => setToken(e.target.value)}\r\n            placeholder=\"Token (Optional)\"\r\n            className=\"p-2 bg-gray-800 border border-gray-600 rounded-lg w-64\"\r\n          />\r\n          <button\r\n            onClick={() => setIsCalling(true)}\r\n            className=\"px-6 py-2 bg-blue-600 rounded-lg\"\r\n          >\r\n            Join Call\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAae,SAAS;;IACtB,uCAAmC;;IAEnC;IACA,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,CAAA,GAAA,0KAAA,CAAA,UAAO,AAAD,EAAE;QAAE,OAAO;QAAO,SAAS;QAAS,OAAO,SAAS;IAAK,GAAG;IAClE,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,IAAI,aAAkB,eAAe,CAAC,SAAS,QAAQ,GAAG;gBACxD,eAAe;oBACb,IAAI;wBACF,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;4BACvD,OAAO;4BACP,OAAO;wBACT;wBAEA,MAAM,WAAW,MAAM,0KAAA,CAAA,UAAQ,CAAC,0BAA0B;wBAC1D,MAAM,WAAW,MAAM,0KAAA,CAAA,UAAQ,CAAC,sBAAsB;wBAEtD,wBAAwB;wBACxB,oBAAoB;oBACtB,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,sCAAsC;oBACtD;gBACF;gBACA;YACF;QAEA,2BAA2B;QAC3B,IAAI;QACN;8BAAG;QAAC;QAAO;KAAS;IAEpB,CAAA,GAAA,0KAAA,CAAA,aAAU,AAAD,EAAE;QAAC;QAAsB;KAAiB;IACnD,MAAM,cAAc,CAAA,GAAA,0KAAA,CAAA,iBAAc,AAAD;IACjC,IAAI,YAAY,MAAM,GAAG,GAAG;QAC1B,QAAQ,GAAG,CAAC,aAAa;IAC3B;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,0BACC,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,0KAAA,CAAA,YAAS;gCACR,oCAAoC;gCACpC,YAAY;gCACZ,UAAU;gCACV,OAAO;0CAEP,cAAA,6LAAC;oCAAK,WAAU;8CAAc;;;;;;;;;;;;;;;;wBAGjC,YAAY,MAAM,GAAG,IACpB,YAAY,GAAG,CAAC,CAAC,qBACf,6LAAC;gCAEC,WAAU;;kDAEV,6LAAC,0KAAA,CAAA,aAAU;wCAAC,MAAM;;;;;;kDAClB,6LAAC;wCAAK,WAAU;kDAAe,KAAK,GAAG;;;;;;;+BAJlC,KAAK,GAAG;;;;sDAQjB,6LAAC;4BAAI,WAAU;sCAAoE;;;;;;;;;;;;8BAMvF,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS,IAAM,SAAS,CAAC;4BACzB,WAAW,CAAC,qBAAqB,EAC/B,QAAQ,iBAAiB,cACzB;sCAED,QAAQ,aAAa;;;;;;sCAExB,6LAAC;4BACC,SAAS,IAAM,YAAY,CAAC;4BAC5B,WAAW,CAAC,qBAAqB,EAC/B,WAAW,iBAAiB,cAC5B;sCAED,WAAW,oBAAoB;;;;;;sCAElC,6LAAC;4BACC,SAAS,IAAM,aAAa;4BAC5B,WAAU;sCACX;;;;;;;;;;;;;;;;;iCAML,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAoB;;;;;;8BAClC,6LAAC;oBACC,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,aAAY;oBACZ,WAAU;;;;;;8BAEZ,6LAAC;oBACC,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oBAC1C,aAAY;oBACZ,WAAU;;;;;;8BAEZ,6LAAC;oBACC,MAAK;oBACL,OAAO,SAAS;oBAChB,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,aAAY;oBACZ,WAAU;;;;;;8BAEZ,6LAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAU;8BACX;;;;;;;;;;;;;;;;;AAOX;GAzIwB;;QAWtB,0KAAA,CAAA,UAAO;QA6BP,0KAAA,CAAA,aAAU;QACU,0KAAA,CAAA,iBAAc;;;KAzCZ","debugId":null}}]
}